## Модуль re

В Python для работы с регулярными выражениями используется модуль __re__.

Соответственно, для начала работы с регулярными выражениями в Python, надо импортировать модуль re.

> В этом разделе используется пример поиска подстроки в строке, без специальных символов, чтобы сосредоточиться на возможностях модуля re. В следующих разделах будут использоваться более сложные примеры.

Основные функции модуля __re__:
* ```match()``` - ищет последовательность в начале строки
* ```search()``` - ищет первое совпадение с шаблоном
* ```findall()``` - ищет все совпадения с шаблоном. Выдает результирующие строки в виде списка
* ```finditer()``` - ищет все совпадения с шаблоном. Выдает итератор
* ```compile()``` - компилирует регулярное выражение. К этому объекту затем можно применять все перечисленные функции

####```search()```

Функция ```search()```:
* используется для поиска подстроки, которая соответствует шаблону
* возвращает объект Match, если подстрока найдена
* возвращает ```None```, если подстрока не найдена


Поиск подстроки в строке:
```python
In [1]: import re

In [2]: line = '00:09:BB:3D:D6:58   10.1.10.2    86250   dhcp-snooping   10    FastEthernet0/1'

In [3]: print(re.search('dhcp', line))
<_sre.SRE_Match object; span=(41, 45), match='dhcp'>

In [4]: print(re.search('dhcpd', line))
None
```


Из объекта Match можно получить несколько вариантов полезной информации.

Например, с помощью метода ```span()```, можно получить числа, указывающие начало и конец подстроки: 
```python
In [5]: match = re.search('dhcp', line)

In [6]: match.span()
Out[6]: (41, 45)

In [7]: line[41:45]
Out[7]: 'dhcp'
```

Метод ```group()``` позволяет получить подстроку, которая соответствует шаблону:
```python
In [15]: match.group()
Out[15]: 'dhcp'
```

Важный момент в использовании функции ```search()```, то что она ищет только первое совпадение в строке, которое соответствует шаблону:
```python
In [16]: line2 = 'test dhcp, test2 dhcp2'

In [17]: match = re.search('dhcp', line2)

In [18]: match.group()
Out[18]: 'dhcp'

In [19]: match.span()
Out[19]: (5, 9)
```

####```findall()```

Для того чтобы найти все совпадения, можно использовать функцию ```findall()```:
```python
In [20]: line2 = 'test dhcp, test2 dhcp2'

In [21]: match = re.findall('dhcp', line2)

In [22]: print(match)
['dhcp', 'dhcp']
```

Особенность функции ```findall()``` в том, что она возвращает список подстрок, которые соответствуют шаблону, а не объект Match.
Поэтому нельзя вызвать методы, которые использовались в функции ```search()```.

####```finditer()```

Для того чтобы получить все совпадения, но при этом, получить совпадения в виде объекта Match(), можно использовать функцию ```finditer()```:
```python
In [23]: line2 = 'test dhcp, test2 dhcp2'

In [24]: match = re.finditer('dhcp', line2)

In [25]: print(match)
<callable-iterator object at 0x10efd2cd0>

In [26]: for i in match:
   ....:     print(i.span())
   ....:     
(5, 9)
(17, 21)

In [27]: line2[5:9]
Out[27]: 'dhcp'

In [28]: line2[17:21]
Out[28]: 'dhcp'
```

Можно воспользоваться и методами ```start()```, ```end()``` (так удобнее получить позиции подстрок):
```python
In [29]: line2 = 'test dhcp, test2 dhcp2'

In [30]: match = re.finditer('dhcp', line2)

In [31]: for i in match:
   ....:     b = i.start()
   ....:     e = i.end()
   ....:     print(line2[b:e])
   ....:     
dhcp
dhcp
```

####```compile()```

В Python есть возможность заранее скомпилировать регулярное выражение, а затем использовать его. Это особенно полезно в тех случаях, когда регулярное выражение много используется в скрипте.

Пример компиляции регулярного выражения и его использования:
```python
In [32]: line2 = 'test dhcp, test2 dhcp2'

In [33]: regex = re.compile('dhcp')

In [34]: match = regex.finditer(line2)

In [35]: for i in match:
   ....:     b = i.start()
   ....:     e = i.end()
   ....:     print(line2[b:e])
   ....:     
dhcp
dhcp
```

